{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/kimkiwoong/SonGil/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _isAndroid = _interopRequireDefault(require(\"./isAndroid\"));\n\nvar _utils = require(\"./utils\");\n\nvar _NativeSpeechRecognition = require(\"./NativeSpeechRecognition\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar RecognitionManager = /*#__PURE__*/function () {\n  function RecognitionManager(SpeechRecognition) {\n    _classCallCheck(this, RecognitionManager);\n\n    this.recognition = null;\n    this.pauseAfterDisconnect = false;\n    this.interimTranscript = '';\n    this.finalTranscript = '';\n    this.listening = false;\n    this.subscribers = {};\n\n    this.onStopListening = function () {};\n\n    this.previousResultWasFinalOnly = false;\n    this.resetTranscript = this.resetTranscript.bind(this);\n    this.startListening = this.startListening.bind(this);\n    this.stopListening = this.stopListening.bind(this);\n    this.abortListening = this.abortListening.bind(this);\n    this.setSpeechRecognition = this.setSpeechRecognition.bind(this);\n    this.setSpeechRecognition(SpeechRecognition);\n\n    if ((0, _isAndroid[\"default\"])()) {\n      this.updateFinalTranscript = (0, _utils.debounce)(this.updateFinalTranscript, 250, true);\n    }\n  }\n\n  _createClass(RecognitionManager, [{\n    key: \"setSpeechRecognition\",\n    value: function setSpeechRecognition(SpeechRecognition) {\n      var browserSupportsRecogniser = !!SpeechRecognition && ((0, _NativeSpeechRecognition.isNative)(SpeechRecognition) || (0, _utils.browserSupportsPolyfills)());\n\n      if (browserSupportsRecogniser) {\n        if (this.recognition) {\n          this.recognition.onresult = function () {};\n\n          this.recognition.onend = function () {};\n\n          if (this.listening) {\n            this.stopListening();\n          }\n        }\n\n        this.recognition = new SpeechRecognition();\n        this.recognition.continuous = false;\n        this.recognition.interimResults = true;\n        this.recognition.onresult = this.updateTranscript.bind(this);\n        this.recognition.onend = this.onRecognitionDisconnect.bind(this);\n      }\n\n      this.emitBrowserSupportsSpeechRecognitionChange(browserSupportsRecogniser);\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(id, callbacks) {\n      this.subscribers[id] = callbacks;\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(id) {\n      delete this.subscribers[id];\n    }\n  }, {\n    key: \"emitListeningChange\",\n    value: function emitListeningChange(listening) {\n      var _this = this;\n\n      this.listening = listening;\n      Object.keys(this.subscribers).forEach(function (id) {\n        var onListeningChange = _this.subscribers[id].onListeningChange;\n        onListeningChange(listening);\n      });\n    }\n  }, {\n    key: \"emitTranscriptChange\",\n    value: function emitTranscriptChange(interimTranscript, finalTranscript) {\n      var _this2 = this;\n\n      Object.keys(this.subscribers).forEach(function (id) {\n        var onTranscriptChange = _this2.subscribers[id].onTranscriptChange;\n        onTranscriptChange(interimTranscript, finalTranscript);\n      });\n    }\n  }, {\n    key: \"emitClearTranscript\",\n    value: function emitClearTranscript() {\n      var _this3 = this;\n\n      Object.keys(this.subscribers).forEach(function (id) {\n        var onClearTranscript = _this3.subscribers[id].onClearTranscript;\n        onClearTranscript();\n      });\n    }\n  }, {\n    key: \"emitBrowserSupportsSpeechRecognitionChange\",\n    value: function emitBrowserSupportsSpeechRecognitionChange(browserSupportsSpeechRecognitionChange) {\n      var _this4 = this;\n\n      Object.keys(this.subscribers).forEach(function (id) {\n        var _this4$subscribers$id = _this4.subscribers[id],\n            onBrowserSupportsSpeechRecognitionChange = _this4$subscribers$id.onBrowserSupportsSpeechRecognitionChange,\n            onBrowserSupportsContinuousListeningChange = _this4$subscribers$id.onBrowserSupportsContinuousListeningChange;\n        onBrowserSupportsSpeechRecognitionChange(browserSupportsSpeechRecognitionChange);\n        onBrowserSupportsContinuousListeningChange(browserSupportsSpeechRecognitionChange);\n      });\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect(disconnectType) {\n      if (this.recognition && this.listening) {\n        switch (disconnectType) {\n          case 'ABORT':\n            this.pauseAfterDisconnect = true;\n            this.abort();\n            break;\n\n          case 'RESET':\n            this.pauseAfterDisconnect = false;\n            this.abort();\n            break;\n\n          case 'STOP':\n          default:\n            this.pauseAfterDisconnect = true;\n            this.stop();\n        }\n      }\n    }\n  }, {\n    key: \"onRecognitionDisconnect\",\n    value: function onRecognitionDisconnect() {\n      this.onStopListening();\n      this.listening = false;\n\n      if (this.pauseAfterDisconnect) {\n        this.emitListeningChange(false);\n      } else if (this.recognition) {\n        if (this.recognition.continuous) {\n          this.startListening({\n            continuous: this.recognition.continuous\n          });\n        } else {\n          this.emitListeningChange(false);\n        }\n      }\n\n      this.pauseAfterDisconnect = false;\n    }\n  }, {\n    key: \"updateTranscript\",\n    value: function updateTranscript(_ref) {\n      var results = _ref.results,\n          resultIndex = _ref.resultIndex;\n      var currentIndex = resultIndex === undefined ? results.length - 1 : resultIndex;\n      this.interimTranscript = '';\n      this.finalTranscript = '';\n\n      for (var i = currentIndex; i < results.length; ++i) {\n        if (results[i].isFinal && (!(0, _isAndroid[\"default\"])() || results[i][0].confidence > 0)) {\n          this.updateFinalTranscript(results[i][0].transcript);\n        } else {\n          this.interimTranscript = (0, _utils.concatTranscripts)(this.interimTranscript, results[i][0].transcript);\n        }\n      }\n\n      var isDuplicateResult = false;\n\n      if (this.interimTranscript === '' && this.finalTranscript !== '') {\n        if (this.previousResultWasFinalOnly) {\n          isDuplicateResult = true;\n        }\n\n        this.previousResultWasFinalOnly = true;\n      } else {\n        this.previousResultWasFinalOnly = false;\n      }\n\n      if (!isDuplicateResult) {\n        this.emitTranscriptChange(this.interimTranscript, this.finalTranscript);\n      }\n    }\n  }, {\n    key: \"updateFinalTranscript\",\n    value: function updateFinalTranscript(newFinalTranscript) {\n      this.finalTranscript = (0, _utils.concatTranscripts)(this.finalTranscript, newFinalTranscript);\n    }\n  }, {\n    key: \"resetTranscript\",\n    value: function resetTranscript() {\n      this.disconnect('RESET');\n    }\n  }, {\n    key: \"startListening\",\n    value: function () {\n      var _startListening = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _ref2,\n            _ref2$continuous,\n            continuous,\n            language,\n            isContinuousChanged,\n            isLanguageChanged,\n            _args = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _ref2 = _args.length > 0 && _args[0] !== undefined ? _args[0] : {}, _ref2$continuous = _ref2.continuous, continuous = _ref2$continuous === void 0 ? false : _ref2$continuous, language = _ref2.language;\n\n                if (this.recognition) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 3:\n                isContinuousChanged = continuous !== this.recognition.continuous;\n                isLanguageChanged = language && language !== this.recognition.lang;\n\n                if (!(isContinuousChanged || isLanguageChanged)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                if (!this.listening) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.next = 9;\n                return this.stopListening();\n\n              case 9:\n                this.recognition.continuous = isContinuousChanged ? continuous : this.recognition.continuous;\n                this.recognition.lang = isLanguageChanged ? language : this.recognition.lang;\n\n              case 11:\n                if (!this.listening) {\n                  if (!this.recognition.continuous) {\n                    this.resetTranscript();\n                    this.emitClearTranscript();\n                  }\n\n                  try {\n                    this.start();\n                  } catch (DOMException) {// Tried to start recognition after it has already started - safe to swallow this error\n                  }\n\n                  this.emitListeningChange(true);\n                }\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function startListening() {\n        return _startListening.apply(this, arguments);\n      }\n\n      return startListening;\n    }()\n  }, {\n    key: \"abortListening\",\n    value: function () {\n      var _abortListening = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _this5 = this;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.disconnect('ABORT');\n                this.emitListeningChange(false);\n                _context2.next = 4;\n                return new Promise(function (resolve) {\n                  _this5.onStopListening = resolve;\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function abortListening() {\n        return _abortListening.apply(this, arguments);\n      }\n\n      return abortListening;\n    }()\n  }, {\n    key: \"stopListening\",\n    value: function () {\n      var _stopListening = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var _this6 = this;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.disconnect('STOP');\n                this.emitListeningChange(false);\n                _context3.next = 4;\n                return new Promise(function (resolve) {\n                  _this6.onStopListening = resolve;\n                });\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function stopListening() {\n        return _stopListening.apply(this, arguments);\n      }\n\n      return stopListening;\n    }()\n  }, {\n    key: \"getRecognition\",\n    value: function getRecognition() {\n      return this.recognition;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      if (this.recognition && !this.listening) {\n        this.recognition.start();\n        this.listening = true;\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this.recognition && this.listening) {\n        this.recognition.stop();\n        this.listening = false;\n      }\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      if (this.recognition && this.listening) {\n        this.recognition.abort();\n        this.listening = false;\n      }\n    }\n  }]);\n\n  return RecognitionManager;\n}();\n\nexports[\"default\"] = RecognitionManager;","map":{"version":3,"sources":["/Users/kimkiwoong/SonGil/client/node_modules/react-speech-recognition/lib/RecognitionManager.js"],"names":["Object","defineProperty","exports","value","_isAndroid","_interopRequireDefault","require","_utils","_NativeSpeechRecognition","obj","__esModule","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","prototype","RecognitionManager","SpeechRecognition","recognition","pauseAfterDisconnect","interimTranscript","finalTranscript","listening","subscribers","onStopListening","previousResultWasFinalOnly","resetTranscript","bind","startListening","stopListening","abortListening","setSpeechRecognition","updateFinalTranscript","debounce","browserSupportsRecogniser","isNative","browserSupportsPolyfills","onresult","onend","continuous","interimResults","updateTranscript","onRecognitionDisconnect","emitBrowserSupportsSpeechRecognitionChange","subscribe","id","callbacks","unsubscribe","emitListeningChange","_this","keys","forEach","onListeningChange","emitTranscriptChange","_this2","onTranscriptChange","emitClearTranscript","_this3","onClearTranscript","browserSupportsSpeechRecognitionChange","_this4","_this4$subscribers$id","onBrowserSupportsSpeechRecognitionChange","onBrowserSupportsContinuousListeningChange","disconnect","disconnectType","abort","stop","_ref","results","resultIndex","currentIndex","isFinal","confidence","transcript","concatTranscripts","isDuplicateResult","newFinalTranscript","_startListening","mark","_callee","_ref2","_ref2$continuous","language","isContinuousChanged","isLanguageChanged","_args","wrap","_callee$","_context","prev","next","abrupt","lang","start","DOMException","_abortListening","_callee2","_this5","_callee2$","_context2","_stopListening","_callee3","_this6","_callee3$","_context3","getRecognition"],"mappings":"AAAA;;;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAAC,SAAD,CAAP,GAAqB,KAAK,CAA1B;;AAEA,IAAIE,UAAU,GAAGC,sBAAsB,CAACC,OAAO,CAAC,aAAD,CAAR,CAAvC;;AAEA,IAAIC,MAAM,GAAGD,OAAO,CAAC,SAAD,CAApB;;AAEA,IAAIE,wBAAwB,GAAGF,OAAO,CAAC,2BAAD,CAAtC;;AAEA,SAASD,sBAAT,CAAgCI,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAE,eAAWA;AAAb,GAArC;AAA0D;;AAEjG,SAASE,kBAAT,CAA4BC,GAA5B,EAAiCC,OAAjC,EAA0CC,MAA1C,EAAkDC,KAAlD,EAAyDC,MAAzD,EAAiEC,GAAjE,EAAsEC,GAAtE,EAA2E;AAAE,MAAI;AAAE,QAAIC,IAAI,GAAGP,GAAG,CAACK,GAAD,CAAH,CAASC,GAAT,CAAX;AAA0B,QAAIf,KAAK,GAAGgB,IAAI,CAAChB,KAAjB;AAAyB,GAAzD,CAA0D,OAAOiB,KAAP,EAAc;AAAEN,IAAAA,MAAM,CAACM,KAAD,CAAN;AAAe;AAAS;;AAAC,MAAID,IAAI,CAACE,IAAT,EAAe;AAAER,IAAAA,OAAO,CAACV,KAAD,CAAP;AAAiB,GAAlC,MAAwC;AAAEmB,IAAAA,OAAO,CAACT,OAAR,CAAgBV,KAAhB,EAAuBoB,IAAvB,CAA4BR,KAA5B,EAAmCC,MAAnC;AAA6C;AAAE;;AAEzQ,SAASQ,iBAAT,CAA2BC,EAA3B,EAA+B;AAAE,SAAO,YAAY;AAAE,QAAIC,IAAI,GAAG,IAAX;AAAA,QAAiBC,IAAI,GAAGC,SAAxB;AAAmC,WAAO,IAAIN,OAAJ,CAAY,UAAUT,OAAV,EAAmBC,MAAnB,EAA2B;AAAE,UAAIF,GAAG,GAAGa,EAAE,CAACI,KAAH,CAASH,IAAT,EAAeC,IAAf,CAAV;;AAAgC,eAASZ,KAAT,CAAeZ,KAAf,EAAsB;AAAEQ,QAAAA,kBAAkB,CAACC,GAAD,EAAMC,OAAN,EAAeC,MAAf,EAAuBC,KAAvB,EAA8BC,MAA9B,EAAsC,MAAtC,EAA8Cb,KAA9C,CAAlB;AAAyE;;AAAC,eAASa,MAAT,CAAgBc,GAAhB,EAAqB;AAAEnB,QAAAA,kBAAkB,CAACC,GAAD,EAAMC,OAAN,EAAeC,MAAf,EAAuBC,KAAvB,EAA8BC,MAA9B,EAAsC,OAAtC,EAA+Cc,GAA/C,CAAlB;AAAwE;;AAACf,MAAAA,KAAK,CAACgB,SAAD,CAAL;AAAmB,KAA9R,CAAP;AAAyS,GAAjW;AAAoW;;AAErY,SAASC,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,KAAnC,EAA0C;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AAAE,QAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;AAA2BE,IAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AAAwDD,IAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;AAAgC,QAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AAA4B5C,IAAAA,MAAM,CAACC,cAAP,CAAsBoC,MAAtB,EAA8BI,UAAU,CAACxB,GAAzC,EAA8CwB,UAA9C;AAA4D;AAAE;;AAE7T,SAASI,YAAT,CAAsBX,WAAtB,EAAmCY,UAAnC,EAA+CC,WAA/C,EAA4D;AAAE,MAAID,UAAJ,EAAgBV,iBAAiB,CAACF,WAAW,CAACc,SAAb,EAAwBF,UAAxB,CAAjB;AAAsD,MAAIC,WAAJ,EAAiBX,iBAAiB,CAACF,WAAD,EAAca,WAAd,CAAjB;AAA6C,SAAOb,WAAP;AAAqB;;AAEvN,IAAIe,kBAAkB,GAAG,aAAa,YAAY;AAChD,WAASA,kBAAT,CAA4BC,iBAA5B,EAA+C;AAC7ClB,IAAAA,eAAe,CAAC,IAAD,EAAOiB,kBAAP,CAAf;;AAEA,SAAKE,WAAL,GAAmB,IAAnB;AACA,SAAKC,oBAAL,GAA4B,KAA5B;AACA,SAAKC,iBAAL,GAAyB,EAAzB;AACA,SAAKC,eAAL,GAAuB,EAAvB;AACA,SAAKC,SAAL,GAAiB,KAAjB;AACA,SAAKC,WAAL,GAAmB,EAAnB;;AAEA,SAAKC,eAAL,GAAuB,YAAY,CAAE,CAArC;;AAEA,SAAKC,0BAAL,GAAkC,KAAlC;AACA,SAAKC,eAAL,GAAuB,KAAKA,eAAL,CAAqBC,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKE,aAAL,GAAqB,KAAKA,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKG,cAAL,GAAsB,KAAKA,cAAL,CAAoBH,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKI,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BJ,IAA1B,CAA+B,IAA/B,CAA5B;AACA,SAAKI,oBAAL,CAA0Bd,iBAA1B;;AAEA,QAAI,CAAC,GAAG9C,UAAU,CAAC,SAAD,CAAd,GAAJ,EAAkC;AAChC,WAAK6D,qBAAL,GAA6B,CAAC,GAAG1D,MAAM,CAAC2D,QAAX,EAAqB,KAAKD,qBAA1B,EAAiD,GAAjD,EAAsD,IAAtD,CAA7B;AACD;AACF;;AAEDpB,EAAAA,YAAY,CAACI,kBAAD,EAAqB,CAAC;AAChChC,IAAAA,GAAG,EAAE,sBAD2B;AAEhCd,IAAAA,KAAK,EAAE,SAAS6D,oBAAT,CAA8Bd,iBAA9B,EAAiD;AACtD,UAAIiB,yBAAyB,GAAG,CAAC,CAACjB,iBAAF,KAAwB,CAAC,GAAG1C,wBAAwB,CAAC4D,QAA7B,EAAuClB,iBAAvC,KAA6D,CAAC,GAAG3C,MAAM,CAAC8D,wBAAX,GAArF,CAAhC;;AAEA,UAAIF,yBAAJ,EAA+B;AAC7B,YAAI,KAAKhB,WAAT,EAAsB;AACpB,eAAKA,WAAL,CAAiBmB,QAAjB,GAA4B,YAAY,CAAE,CAA1C;;AAEA,eAAKnB,WAAL,CAAiBoB,KAAjB,GAAyB,YAAY,CAAE,CAAvC;;AAEA,cAAI,KAAKhB,SAAT,EAAoB;AAClB,iBAAKO,aAAL;AACD;AACF;;AAED,aAAKX,WAAL,GAAmB,IAAID,iBAAJ,EAAnB;AACA,aAAKC,WAAL,CAAiBqB,UAAjB,GAA8B,KAA9B;AACA,aAAKrB,WAAL,CAAiBsB,cAAjB,GAAkC,IAAlC;AACA,aAAKtB,WAAL,CAAiBmB,QAAjB,GAA4B,KAAKI,gBAAL,CAAsBd,IAAtB,CAA2B,IAA3B,CAA5B;AACA,aAAKT,WAAL,CAAiBoB,KAAjB,GAAyB,KAAKI,uBAAL,CAA6Bf,IAA7B,CAAkC,IAAlC,CAAzB;AACD;;AAED,WAAKgB,0CAAL,CAAgDT,yBAAhD;AACD;AAxB+B,GAAD,EAyB9B;AACDlD,IAAAA,GAAG,EAAE,WADJ;AAEDd,IAAAA,KAAK,EAAE,SAAS0E,SAAT,CAAmBC,EAAnB,EAAuBC,SAAvB,EAAkC;AACvC,WAAKvB,WAAL,CAAiBsB,EAAjB,IAAuBC,SAAvB;AACD;AAJA,GAzB8B,EA8B9B;AACD9D,IAAAA,GAAG,EAAE,aADJ;AAEDd,IAAAA,KAAK,EAAE,SAAS6E,WAAT,CAAqBF,EAArB,EAAyB;AAC9B,aAAO,KAAKtB,WAAL,CAAiBsB,EAAjB,CAAP;AACD;AAJA,GA9B8B,EAmC9B;AACD7D,IAAAA,GAAG,EAAE,qBADJ;AAEDd,IAAAA,KAAK,EAAE,SAAS8E,mBAAT,CAA6B1B,SAA7B,EAAwC;AAC7C,UAAI2B,KAAK,GAAG,IAAZ;;AAEA,WAAK3B,SAAL,GAAiBA,SAAjB;AACAvD,MAAAA,MAAM,CAACmF,IAAP,CAAY,KAAK3B,WAAjB,EAA8B4B,OAA9B,CAAsC,UAAUN,EAAV,EAAc;AAClD,YAAIO,iBAAiB,GAAGH,KAAK,CAAC1B,WAAN,CAAkBsB,EAAlB,EAAsBO,iBAA9C;AACAA,QAAAA,iBAAiB,CAAC9B,SAAD,CAAjB;AACD,OAHD;AAID;AAVA,GAnC8B,EA8C9B;AACDtC,IAAAA,GAAG,EAAE,sBADJ;AAEDd,IAAAA,KAAK,EAAE,SAASmF,oBAAT,CAA8BjC,iBAA9B,EAAiDC,eAAjD,EAAkE;AACvE,UAAIiC,MAAM,GAAG,IAAb;;AAEAvF,MAAAA,MAAM,CAACmF,IAAP,CAAY,KAAK3B,WAAjB,EAA8B4B,OAA9B,CAAsC,UAAUN,EAAV,EAAc;AAClD,YAAIU,kBAAkB,GAAGD,MAAM,CAAC/B,WAAP,CAAmBsB,EAAnB,EAAuBU,kBAAhD;AACAA,QAAAA,kBAAkB,CAACnC,iBAAD,EAAoBC,eAApB,CAAlB;AACD,OAHD;AAID;AATA,GA9C8B,EAwD9B;AACDrC,IAAAA,GAAG,EAAE,qBADJ;AAEDd,IAAAA,KAAK,EAAE,SAASsF,mBAAT,GAA+B;AACpC,UAAIC,MAAM,GAAG,IAAb;;AAEA1F,MAAAA,MAAM,CAACmF,IAAP,CAAY,KAAK3B,WAAjB,EAA8B4B,OAA9B,CAAsC,UAAUN,EAAV,EAAc;AAClD,YAAIa,iBAAiB,GAAGD,MAAM,CAAClC,WAAP,CAAmBsB,EAAnB,EAAuBa,iBAA/C;AACAA,QAAAA,iBAAiB;AAClB,OAHD;AAID;AATA,GAxD8B,EAkE9B;AACD1E,IAAAA,GAAG,EAAE,4CADJ;AAEDd,IAAAA,KAAK,EAAE,SAASyE,0CAAT,CAAoDgB,sCAApD,EAA4F;AACjG,UAAIC,MAAM,GAAG,IAAb;;AAEA7F,MAAAA,MAAM,CAACmF,IAAP,CAAY,KAAK3B,WAAjB,EAA8B4B,OAA9B,CAAsC,UAAUN,EAAV,EAAc;AAClD,YAAIgB,qBAAqB,GAAGD,MAAM,CAACrC,WAAP,CAAmBsB,EAAnB,CAA5B;AAAA,YACIiB,wCAAwC,GAAGD,qBAAqB,CAACC,wCADrE;AAAA,YAEIC,0CAA0C,GAAGF,qBAAqB,CAACE,0CAFvE;AAGAD,QAAAA,wCAAwC,CAACH,sCAAD,CAAxC;AACAI,QAAAA,0CAA0C,CAACJ,sCAAD,CAA1C;AACD,OAND;AAOD;AAZA,GAlE8B,EA+E9B;AACD3E,IAAAA,GAAG,EAAE,YADJ;AAEDd,IAAAA,KAAK,EAAE,SAAS8F,UAAT,CAAoBC,cAApB,EAAoC;AACzC,UAAI,KAAK/C,WAAL,IAAoB,KAAKI,SAA7B,EAAwC;AACtC,gBAAQ2C,cAAR;AACE,eAAK,OAAL;AACE,iBAAK9C,oBAAL,GAA4B,IAA5B;AACA,iBAAK+C,KAAL;AACA;;AAEF,eAAK,OAAL;AACE,iBAAK/C,oBAAL,GAA4B,KAA5B;AACA,iBAAK+C,KAAL;AACA;;AAEF,eAAK,MAAL;AACA;AACE,iBAAK/C,oBAAL,GAA4B,IAA5B;AACA,iBAAKgD,IAAL;AAdJ;AAgBD;AACF;AArBA,GA/E8B,EAqG9B;AACDnF,IAAAA,GAAG,EAAE,yBADJ;AAEDd,IAAAA,KAAK,EAAE,SAASwE,uBAAT,GAAmC;AACxC,WAAKlB,eAAL;AACA,WAAKF,SAAL,GAAiB,KAAjB;;AAEA,UAAI,KAAKH,oBAAT,EAA+B;AAC7B,aAAK6B,mBAAL,CAAyB,KAAzB;AACD,OAFD,MAEO,IAAI,KAAK9B,WAAT,EAAsB;AAC3B,YAAI,KAAKA,WAAL,CAAiBqB,UAArB,EAAiC;AAC/B,eAAKX,cAAL,CAAoB;AAClBW,YAAAA,UAAU,EAAE,KAAKrB,WAAL,CAAiBqB;AADX,WAApB;AAGD,SAJD,MAIO;AACL,eAAKS,mBAAL,CAAyB,KAAzB;AACD;AACF;;AAED,WAAK7B,oBAAL,GAA4B,KAA5B;AACD;AAnBA,GArG8B,EAyH9B;AACDnC,IAAAA,GAAG,EAAE,kBADJ;AAEDd,IAAAA,KAAK,EAAE,SAASuE,gBAAT,CAA0B2B,IAA1B,EAAgC;AACrC,UAAIC,OAAO,GAAGD,IAAI,CAACC,OAAnB;AAAA,UACIC,WAAW,GAAGF,IAAI,CAACE,WADvB;AAEA,UAAIC,YAAY,GAAGD,WAAW,KAAKxE,SAAhB,GAA4BuE,OAAO,CAAC9D,MAAR,GAAiB,CAA7C,GAAiD+D,WAApE;AACA,WAAKlD,iBAAL,GAAyB,EAAzB;AACA,WAAKC,eAAL,GAAuB,EAAvB;;AAEA,WAAK,IAAIf,CAAC,GAAGiE,YAAb,EAA2BjE,CAAC,GAAG+D,OAAO,CAAC9D,MAAvC,EAA+C,EAAED,CAAjD,EAAoD;AAClD,YAAI+D,OAAO,CAAC/D,CAAD,CAAP,CAAWkE,OAAX,KAAuB,CAAC,CAAC,GAAGrG,UAAU,CAAC,SAAD,CAAd,GAAD,IAAiCkG,OAAO,CAAC/D,CAAD,CAAP,CAAW,CAAX,EAAcmE,UAAd,GAA2B,CAAnF,CAAJ,EAA2F;AACzF,eAAKzC,qBAAL,CAA2BqC,OAAO,CAAC/D,CAAD,CAAP,CAAW,CAAX,EAAcoE,UAAzC;AACD,SAFD,MAEO;AACL,eAAKtD,iBAAL,GAAyB,CAAC,GAAG9C,MAAM,CAACqG,iBAAX,EAA8B,KAAKvD,iBAAnC,EAAsDiD,OAAO,CAAC/D,CAAD,CAAP,CAAW,CAAX,EAAcoE,UAApE,CAAzB;AACD;AACF;;AAED,UAAIE,iBAAiB,GAAG,KAAxB;;AAEA,UAAI,KAAKxD,iBAAL,KAA2B,EAA3B,IAAiC,KAAKC,eAAL,KAAyB,EAA9D,EAAkE;AAChE,YAAI,KAAKI,0BAAT,EAAqC;AACnCmD,UAAAA,iBAAiB,GAAG,IAApB;AACD;;AAED,aAAKnD,0BAAL,GAAkC,IAAlC;AACD,OAND,MAMO;AACL,aAAKA,0BAAL,GAAkC,KAAlC;AACD;;AAED,UAAI,CAACmD,iBAAL,EAAwB;AACtB,aAAKvB,oBAAL,CAA0B,KAAKjC,iBAA/B,EAAkD,KAAKC,eAAvD;AACD;AACF;AAhCA,GAzH8B,EA0J9B;AACDrC,IAAAA,GAAG,EAAE,uBADJ;AAEDd,IAAAA,KAAK,EAAE,SAAS8D,qBAAT,CAA+B6C,kBAA/B,EAAmD;AACxD,WAAKxD,eAAL,GAAuB,CAAC,GAAG/C,MAAM,CAACqG,iBAAX,EAA8B,KAAKtD,eAAnC,EAAoDwD,kBAApD,CAAvB;AACD;AAJA,GA1J8B,EA+J9B;AACD7F,IAAAA,GAAG,EAAE,iBADJ;AAEDd,IAAAA,KAAK,EAAE,SAASwD,eAAT,GAA2B;AAChC,WAAKsC,UAAL,CAAgB,OAAhB;AACD;AAJA,GA/J8B,EAoK9B;AACDhF,IAAAA,GAAG,EAAE,gBADJ;AAEDd,IAAAA,KAAK,EAAE,YAAY;AACjB,UAAI4G,eAAe,GAAGvF,iBAAiB,EAAE,aAAa,oBAAmBwF,IAAnB,CAAwB,SAASC,OAAT,GAAmB;AAC/F,YAAIC,KAAJ;AAAA,YACIC,gBADJ;AAAA,YAEI3C,UAFJ;AAAA,YAGI4C,QAHJ;AAAA,YAIIC,mBAJJ;AAAA,YAKIC,iBALJ;AAAA,YAMIC,KAAK,GAAG3F,SANZ;;AAQA,eAAO,oBAAmB4F,IAAnB,CAAwB,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AACzD,iBAAO,CAAP,EAAU;AACR,oBAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;AACE,mBAAK,CAAL;AACEV,gBAAAA,KAAK,GAAGK,KAAK,CAAC/E,MAAN,GAAe,CAAf,IAAoB+E,KAAK,CAAC,CAAD,CAAL,KAAaxF,SAAjC,GAA6CwF,KAAK,CAAC,CAAD,CAAlD,GAAwD,EAAhE,EAAoEJ,gBAAgB,GAAGD,KAAK,CAAC1C,UAA7F,EAAyGA,UAAU,GAAG2C,gBAAgB,KAAK,KAAK,CAA1B,GAA8B,KAA9B,GAAsCA,gBAA5J,EAA8KC,QAAQ,GAAGF,KAAK,CAACE,QAA/L;;AAEA,oBAAI,KAAKjE,WAAT,EAAsB;AACpBuE,kBAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA;AACD;;AAED,uBAAOF,QAAQ,CAACG,MAAT,CAAgB,QAAhB,CAAP;;AAEF,mBAAK,CAAL;AACER,gBAAAA,mBAAmB,GAAG7C,UAAU,KAAK,KAAKrB,WAAL,CAAiBqB,UAAtD;AACA8C,gBAAAA,iBAAiB,GAAGF,QAAQ,IAAIA,QAAQ,KAAK,KAAKjE,WAAL,CAAiB2E,IAA9D;;AAEA,oBAAI,EAAET,mBAAmB,IAAIC,iBAAzB,CAAJ,EAAiD;AAC/CI,kBAAAA,QAAQ,CAACE,IAAT,GAAgB,EAAhB;AACA;AACD;;AAED,oBAAI,CAAC,KAAKrE,SAAV,EAAqB;AACnBmE,kBAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA;AACD;;AAEDF,gBAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA,uBAAO,KAAK9D,aAAL,EAAP;;AAEF,mBAAK,CAAL;AACE,qBAAKX,WAAL,CAAiBqB,UAAjB,GAA8B6C,mBAAmB,GAAG7C,UAAH,GAAgB,KAAKrB,WAAL,CAAiBqB,UAAlF;AACA,qBAAKrB,WAAL,CAAiB2E,IAAjB,GAAwBR,iBAAiB,GAAGF,QAAH,GAAc,KAAKjE,WAAL,CAAiB2E,IAAxE;;AAEF,mBAAK,EAAL;AACE,oBAAI,CAAC,KAAKvE,SAAV,EAAqB;AACnB,sBAAI,CAAC,KAAKJ,WAAL,CAAiBqB,UAAtB,EAAkC;AAChC,yBAAKb,eAAL;AACA,yBAAK8B,mBAAL;AACD;;AAED,sBAAI;AACF,yBAAKsC,KAAL;AACD,mBAFD,CAEE,OAAOC,YAAP,EAAqB,CAAC;AACvB;;AAED,uBAAK/C,mBAAL,CAAyB,IAAzB;AACD;;AAEH,mBAAK,EAAL;AACA,mBAAK,KAAL;AACE,uBAAOyC,QAAQ,CAACtB,IAAT,EAAP;AAjDJ;AAmDD;AACF,SAtDM,EAsDJa,OAtDI,EAsDK,IAtDL,CAAP;AAuDD,OAhEqD,CAAf,CAAvC;;AAkEA,eAASpD,cAAT,GAA0B;AACxB,eAAOkD,eAAe,CAAClF,KAAhB,CAAsB,IAAtB,EAA4BD,SAA5B,CAAP;AACD;;AAED,aAAOiC,cAAP;AACD,KAxEM;AAFN,GApK8B,EA+O9B;AACD5C,IAAAA,GAAG,EAAE,gBADJ;AAEDd,IAAAA,KAAK,EAAE,YAAY;AACjB,UAAI8H,eAAe,GAAGzG,iBAAiB,EAAE,aAAa,oBAAmBwF,IAAnB,CAAwB,SAASkB,QAAT,GAAoB;AAChG,YAAIC,MAAM,GAAG,IAAb;;AAEA,eAAO,oBAAmBX,IAAnB,CAAwB,SAASY,SAAT,CAAmBC,SAAnB,EAA8B;AAC3D,iBAAO,CAAP,EAAU;AACR,oBAAQA,SAAS,CAACV,IAAV,GAAiBU,SAAS,CAACT,IAAnC;AACE,mBAAK,CAAL;AACE,qBAAK3B,UAAL,CAAgB,OAAhB;AACA,qBAAKhB,mBAAL,CAAyB,KAAzB;AACAoD,gBAAAA,SAAS,CAACT,IAAV,GAAiB,CAAjB;AACA,uBAAO,IAAItG,OAAJ,CAAY,UAAUT,OAAV,EAAmB;AACpCsH,kBAAAA,MAAM,CAAC1E,eAAP,GAAyB5C,OAAzB;AACD,iBAFM,CAAP;;AAIF,mBAAK,CAAL;AACA,mBAAK,KAAL;AACE,uBAAOwH,SAAS,CAACjC,IAAV,EAAP;AAXJ;AAaD;AACF,SAhBM,EAgBJ8B,QAhBI,EAgBM,IAhBN,CAAP;AAiBD,OApBqD,CAAf,CAAvC;;AAsBA,eAASnE,cAAT,GAA0B;AACxB,eAAOkE,eAAe,CAACpG,KAAhB,CAAsB,IAAtB,EAA4BD,SAA5B,CAAP;AACD;;AAED,aAAOmC,cAAP;AACD,KA5BM;AAFN,GA/O8B,EA8Q9B;AACD9C,IAAAA,GAAG,EAAE,eADJ;AAEDd,IAAAA,KAAK,EAAE,YAAY;AACjB,UAAImI,cAAc,GAAG9G,iBAAiB,EAAE,aAAa,oBAAmBwF,IAAnB,CAAwB,SAASuB,QAAT,GAAoB;AAC/F,YAAIC,MAAM,GAAG,IAAb;;AAEA,eAAO,oBAAmBhB,IAAnB,CAAwB,SAASiB,SAAT,CAAmBC,SAAnB,EAA8B;AAC3D,iBAAO,CAAP,EAAU;AACR,oBAAQA,SAAS,CAACf,IAAV,GAAiBe,SAAS,CAACd,IAAnC;AACE,mBAAK,CAAL;AACE,qBAAK3B,UAAL,CAAgB,MAAhB;AACA,qBAAKhB,mBAAL,CAAyB,KAAzB;AACAyD,gBAAAA,SAAS,CAACd,IAAV,GAAiB,CAAjB;AACA,uBAAO,IAAItG,OAAJ,CAAY,UAAUT,OAAV,EAAmB;AACpC2H,kBAAAA,MAAM,CAAC/E,eAAP,GAAyB5C,OAAzB;AACD,iBAFM,CAAP;;AAIF,mBAAK,CAAL;AACA,mBAAK,KAAL;AACE,uBAAO6H,SAAS,CAACtC,IAAV,EAAP;AAXJ;AAaD;AACF,SAhBM,EAgBJmC,QAhBI,EAgBM,IAhBN,CAAP;AAiBD,OApBoD,CAAf,CAAtC;;AAsBA,eAASzE,aAAT,GAAyB;AACvB,eAAOwE,cAAc,CAACzG,KAAf,CAAqB,IAArB,EAA2BD,SAA3B,CAAP;AACD;;AAED,aAAOkC,aAAP;AACD,KA5BM;AAFN,GA9Q8B,EA6S9B;AACD7C,IAAAA,GAAG,EAAE,gBADJ;AAEDd,IAAAA,KAAK,EAAE,SAASwI,cAAT,GAA0B;AAC/B,aAAO,KAAKxF,WAAZ;AACD;AAJA,GA7S8B,EAkT9B;AACDlC,IAAAA,GAAG,EAAE,OADJ;AAEDd,IAAAA,KAAK,EAAE,SAAS4H,KAAT,GAAiB;AACtB,UAAI,KAAK5E,WAAL,IAAoB,CAAC,KAAKI,SAA9B,EAAyC;AACvC,aAAKJ,WAAL,CAAiB4E,KAAjB;AACA,aAAKxE,SAAL,GAAiB,IAAjB;AACD;AACF;AAPA,GAlT8B,EA0T9B;AACDtC,IAAAA,GAAG,EAAE,MADJ;AAEDd,IAAAA,KAAK,EAAE,SAASiG,IAAT,GAAgB;AACrB,UAAI,KAAKjD,WAAL,IAAoB,KAAKI,SAA7B,EAAwC;AACtC,aAAKJ,WAAL,CAAiBiD,IAAjB;AACA,aAAK7C,SAAL,GAAiB,KAAjB;AACD;AACF;AAPA,GA1T8B,EAkU9B;AACDtC,IAAAA,GAAG,EAAE,OADJ;AAEDd,IAAAA,KAAK,EAAE,SAASgG,KAAT,GAAiB;AACtB,UAAI,KAAKhD,WAAL,IAAoB,KAAKI,SAA7B,EAAwC;AACtC,aAAKJ,WAAL,CAAiBgD,KAAjB;AACA,aAAK5C,SAAL,GAAiB,KAAjB;AACD;AACF;AAPA,GAlU8B,CAArB,CAAZ;;AA4UA,SAAON,kBAAP;AACD,CAvWqC,EAAtC;;AAyWA/C,OAAO,CAAC,SAAD,CAAP,GAAqB+C,kBAArB","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _isAndroid = _interopRequireDefault(require(\"./isAndroid\"));\n\nvar _utils = require(\"./utils\");\n\nvar _NativeSpeechRecognition = require(\"./NativeSpeechRecognition\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar RecognitionManager = /*#__PURE__*/function () {\n  function RecognitionManager(SpeechRecognition) {\n    _classCallCheck(this, RecognitionManager);\n\n    this.recognition = null;\n    this.pauseAfterDisconnect = false;\n    this.interimTranscript = '';\n    this.finalTranscript = '';\n    this.listening = false;\n    this.subscribers = {};\n\n    this.onStopListening = function () {};\n\n    this.previousResultWasFinalOnly = false;\n    this.resetTranscript = this.resetTranscript.bind(this);\n    this.startListening = this.startListening.bind(this);\n    this.stopListening = this.stopListening.bind(this);\n    this.abortListening = this.abortListening.bind(this);\n    this.setSpeechRecognition = this.setSpeechRecognition.bind(this);\n    this.setSpeechRecognition(SpeechRecognition);\n\n    if ((0, _isAndroid[\"default\"])()) {\n      this.updateFinalTranscript = (0, _utils.debounce)(this.updateFinalTranscript, 250, true);\n    }\n  }\n\n  _createClass(RecognitionManager, [{\n    key: \"setSpeechRecognition\",\n    value: function setSpeechRecognition(SpeechRecognition) {\n      var browserSupportsRecogniser = !!SpeechRecognition && ((0, _NativeSpeechRecognition.isNative)(SpeechRecognition) || (0, _utils.browserSupportsPolyfills)());\n\n      if (browserSupportsRecogniser) {\n        if (this.recognition) {\n          this.recognition.onresult = function () {};\n\n          this.recognition.onend = function () {};\n\n          if (this.listening) {\n            this.stopListening();\n          }\n        }\n\n        this.recognition = new SpeechRecognition();\n        this.recognition.continuous = false;\n        this.recognition.interimResults = true;\n        this.recognition.onresult = this.updateTranscript.bind(this);\n        this.recognition.onend = this.onRecognitionDisconnect.bind(this);\n      }\n\n      this.emitBrowserSupportsSpeechRecognitionChange(browserSupportsRecogniser);\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(id, callbacks) {\n      this.subscribers[id] = callbacks;\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(id) {\n      delete this.subscribers[id];\n    }\n  }, {\n    key: \"emitListeningChange\",\n    value: function emitListeningChange(listening) {\n      var _this = this;\n\n      this.listening = listening;\n      Object.keys(this.subscribers).forEach(function (id) {\n        var onListeningChange = _this.subscribers[id].onListeningChange;\n        onListeningChange(listening);\n      });\n    }\n  }, {\n    key: \"emitTranscriptChange\",\n    value: function emitTranscriptChange(interimTranscript, finalTranscript) {\n      var _this2 = this;\n\n      Object.keys(this.subscribers).forEach(function (id) {\n        var onTranscriptChange = _this2.subscribers[id].onTranscriptChange;\n        onTranscriptChange(interimTranscript, finalTranscript);\n      });\n    }\n  }, {\n    key: \"emitClearTranscript\",\n    value: function emitClearTranscript() {\n      var _this3 = this;\n\n      Object.keys(this.subscribers).forEach(function (id) {\n        var onClearTranscript = _this3.subscribers[id].onClearTranscript;\n        onClearTranscript();\n      });\n    }\n  }, {\n    key: \"emitBrowserSupportsSpeechRecognitionChange\",\n    value: function emitBrowserSupportsSpeechRecognitionChange(browserSupportsSpeechRecognitionChange) {\n      var _this4 = this;\n\n      Object.keys(this.subscribers).forEach(function (id) {\n        var _this4$subscribers$id = _this4.subscribers[id],\n            onBrowserSupportsSpeechRecognitionChange = _this4$subscribers$id.onBrowserSupportsSpeechRecognitionChange,\n            onBrowserSupportsContinuousListeningChange = _this4$subscribers$id.onBrowserSupportsContinuousListeningChange;\n        onBrowserSupportsSpeechRecognitionChange(browserSupportsSpeechRecognitionChange);\n        onBrowserSupportsContinuousListeningChange(browserSupportsSpeechRecognitionChange);\n      });\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect(disconnectType) {\n      if (this.recognition && this.listening) {\n        switch (disconnectType) {\n          case 'ABORT':\n            this.pauseAfterDisconnect = true;\n            this.abort();\n            break;\n\n          case 'RESET':\n            this.pauseAfterDisconnect = false;\n            this.abort();\n            break;\n\n          case 'STOP':\n          default:\n            this.pauseAfterDisconnect = true;\n            this.stop();\n        }\n      }\n    }\n  }, {\n    key: \"onRecognitionDisconnect\",\n    value: function onRecognitionDisconnect() {\n      this.onStopListening();\n      this.listening = false;\n\n      if (this.pauseAfterDisconnect) {\n        this.emitListeningChange(false);\n      } else if (this.recognition) {\n        if (this.recognition.continuous) {\n          this.startListening({\n            continuous: this.recognition.continuous\n          });\n        } else {\n          this.emitListeningChange(false);\n        }\n      }\n\n      this.pauseAfterDisconnect = false;\n    }\n  }, {\n    key: \"updateTranscript\",\n    value: function updateTranscript(_ref) {\n      var results = _ref.results,\n          resultIndex = _ref.resultIndex;\n      var currentIndex = resultIndex === undefined ? results.length - 1 : resultIndex;\n      this.interimTranscript = '';\n      this.finalTranscript = '';\n\n      for (var i = currentIndex; i < results.length; ++i) {\n        if (results[i].isFinal && (!(0, _isAndroid[\"default\"])() || results[i][0].confidence > 0)) {\n          this.updateFinalTranscript(results[i][0].transcript);\n        } else {\n          this.interimTranscript = (0, _utils.concatTranscripts)(this.interimTranscript, results[i][0].transcript);\n        }\n      }\n\n      var isDuplicateResult = false;\n\n      if (this.interimTranscript === '' && this.finalTranscript !== '') {\n        if (this.previousResultWasFinalOnly) {\n          isDuplicateResult = true;\n        }\n\n        this.previousResultWasFinalOnly = true;\n      } else {\n        this.previousResultWasFinalOnly = false;\n      }\n\n      if (!isDuplicateResult) {\n        this.emitTranscriptChange(this.interimTranscript, this.finalTranscript);\n      }\n    }\n  }, {\n    key: \"updateFinalTranscript\",\n    value: function updateFinalTranscript(newFinalTranscript) {\n      this.finalTranscript = (0, _utils.concatTranscripts)(this.finalTranscript, newFinalTranscript);\n    }\n  }, {\n    key: \"resetTranscript\",\n    value: function resetTranscript() {\n      this.disconnect('RESET');\n    }\n  }, {\n    key: \"startListening\",\n    value: function () {\n      var _startListening = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _ref2,\n            _ref2$continuous,\n            continuous,\n            language,\n            isContinuousChanged,\n            isLanguageChanged,\n            _args = arguments;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _ref2 = _args.length > 0 && _args[0] !== undefined ? _args[0] : {}, _ref2$continuous = _ref2.continuous, continuous = _ref2$continuous === void 0 ? false : _ref2$continuous, language = _ref2.language;\n\n                if (this.recognition) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 3:\n                isContinuousChanged = continuous !== this.recognition.continuous;\n                isLanguageChanged = language && language !== this.recognition.lang;\n\n                if (!(isContinuousChanged || isLanguageChanged)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                if (!this.listening) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.next = 9;\n                return this.stopListening();\n\n              case 9:\n                this.recognition.continuous = isContinuousChanged ? continuous : this.recognition.continuous;\n                this.recognition.lang = isLanguageChanged ? language : this.recognition.lang;\n\n              case 11:\n                if (!this.listening) {\n                  if (!this.recognition.continuous) {\n                    this.resetTranscript();\n                    this.emitClearTranscript();\n                  }\n\n                  try {\n                    this.start();\n                  } catch (DOMException) {// Tried to start recognition after it has already started - safe to swallow this error\n                  }\n\n                  this.emitListeningChange(true);\n                }\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function startListening() {\n        return _startListening.apply(this, arguments);\n      }\n\n      return startListening;\n    }()\n  }, {\n    key: \"abortListening\",\n    value: function () {\n      var _abortListening = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this5 = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.disconnect('ABORT');\n                this.emitListeningChange(false);\n                _context2.next = 4;\n                return new Promise(function (resolve) {\n                  _this5.onStopListening = resolve;\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function abortListening() {\n        return _abortListening.apply(this, arguments);\n      }\n\n      return abortListening;\n    }()\n  }, {\n    key: \"stopListening\",\n    value: function () {\n      var _stopListening = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var _this6 = this;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.disconnect('STOP');\n                this.emitListeningChange(false);\n                _context3.next = 4;\n                return new Promise(function (resolve) {\n                  _this6.onStopListening = resolve;\n                });\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function stopListening() {\n        return _stopListening.apply(this, arguments);\n      }\n\n      return stopListening;\n    }()\n  }, {\n    key: \"getRecognition\",\n    value: function getRecognition() {\n      return this.recognition;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      if (this.recognition && !this.listening) {\n        this.recognition.start();\n        this.listening = true;\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this.recognition && this.listening) {\n        this.recognition.stop();\n        this.listening = false;\n      }\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      if (this.recognition && this.listening) {\n        this.recognition.abort();\n        this.listening = false;\n      }\n    }\n  }]);\n\n  return RecognitionManager;\n}();\n\nexports[\"default\"] = RecognitionManager;"]},"metadata":{},"sourceType":"script"}